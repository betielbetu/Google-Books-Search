(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){e.exports=a(142)},106:function(e,t,a){},107:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),s=(a(106),a(107),a(9)),i=(a(108),a(10)),c=a(14),l=a(28),u=a(27),p=a(25),m=a(36),h=a(160),f=a(86),g=a(169),d=a(165),v=a(20),b=a.n(v),E=a(33),k=a(34),O=a.n(k),y=function(){function e(){Object(i.a)(this,e),this.URL="https://www.googleapis.com/books/v1/volumes",this.APIKEY="AIzaSyBJYy5-SBnX5meFC9Sf6Wcy7ucrTHusu-4"}return Object(c.a)(e,[{key:"searchBooks",value:function(){var e=Object(E.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",Promise.resolve(null));case 2:return n={key:this.APIKEY,q:t,startIndex:a},r="".concat(this.URL,"?").concat((o=n,Object.entries(o).map((function(e){return e.map(encodeURIComponent).join("=")})).join("&"))),e.abrupt("return",O.a.get(r));case 5:case"end":return e.stop()}var o}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),j="No search entered, please try again...",P="Sorry, no books with that name found...",w=function(){function e(t){Object(i.a)(this,e),this.title="",this.authors=[],this.description="",this.image="",this.link="",this.pageCount=0,this.averageRating=0,this.categories=[];var a=t&&t.volumeInfo;a&&(this.id=t.id,this.title=a.title,this.authors=a.authors,this.description=a.description,this.image=a.imageLinks&&a.imageLinks.thumbnail,this.link=a.infoLink,this.pageCount=a.pageCount,this.averageRating=a.averageRating,this.categories=a.categories)}return Object(c.a)(e,[{key:"createFromObject",value:function(e){e&&(this.id=e.id,this.title=e.title,this.authors=e.authors,this.description=e.description,this.image=e.image,this.link=e.link,this.pageCount=e.pageCount,this.averageRating=e.averageRating,this.categories=e.categories)}}]),e}(),N=a(23),F=a(92),S=function(e){return{type:"UPDATE_BOOKS",payload:e}},C=function(e){return{type:"SET_FAVORITES",payload:e}},A=a(62),x=(a(133),function(){function e(){Object(i.a)(this,e),this.URL="/books"}return Object(c.a)(e,[{key:"getIds",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(this.URL,"/id"),e.abrupt("return",O.a.get(t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveFavorite",value:function(){var e=Object(E.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.a.post(this.URL,{favorite:t}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteFavorite",value:function(){var e=Object(E.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(this.URL,"/").concat(t),e.abrupt("return",O.a.delete(a));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFavorites",value:function(){var e=Object(E.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.a.get(this.URL));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).favoriteApi=new x,n}return Object(c.a)(a,[{key:"addFavorite",value:function(e){var t=this;e&&this.props.addFavorite({favorite:e}).then((function(){return t.favoriteApi.saveFavorite(t.props.singleBook)}))}},{key:"deleteFavorite",value:function(e){var t=this;e&&(this.props.deleteFavorite({favorite:e}).then((function(){return t.favoriteApi.deleteFavorite(e)})),this.props.deleteFavoriteBook({id:e}))}},{key:"render",value:function(){var e=this,t=this.props.singleBook,a=r.a.createElement(A.a,{size:"2x",icon:["far","heart"]}),n=r.a.createElement(A.a,{size:"2x",icon:["fas","heart"]}),o=r.a.createElement(A.a,{size:"2x",icon:["fas","binoculars"]}),s=this.props.favorites&&this.props.favorites.includes(t.id);return r.a.createElement(F.a.Item,null,r.a.createElement(h.a,null,r.a.createElement(f.a,{xs:2},r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.link},r.a.createElement("img",{src:t.image,alt:t.title}))),r.a.createElement(f.a,{xs:10},r.a.createElement(h.a,null,r.a.createElement(f.a,null,r.a.createElement("span",{className:"book-label-title mr-2"},r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.link},t.title))),r.a.createElement(f.a,{className:"position-relative"},r.a.createElement("span",{className:"position-absolute corner-binoculars",title:"View Book"},t.link?r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:t.link},o):""),r.a.createElement("span",{className:"position-absolute corner-heart"},s?r.a.createElement("span",{className:"pointer",title:"Remove from Favorites",onClick:function(a){return e.deleteFavorite(t.id)}},n):r.a.createElement("span",{className:"pointer",title:"Add to Favorites",onClick:function(a){return e.addFavorite(t.id)}},a)))),r.a.createElement(h.a,null,r.a.createElement(f.a,null,r.a.createElement("span",{className:"font-weight-bold mr-1"},"By:")," ",t.authors?t.authors.join(", "):"")),r.a.createElement(h.a,{className:"mt-3"},r.a.createElement(f.a,null,r.a.createElement("span",{className:"font-weight-bold mr-1"},"Description:"),function(e,t,a){if(!e||e.length<=t)return e;var n=e.substr(0,t-1);return(a?n.substr(0,n.lastIndexOf(" ")):n)+" ..."}(t.description,1e3,!0))),r.a.createElement(h.a,{className:"mt-2"},r.a.createElement(f.a,null,r.a.createElement("span",{className:"font-weight-bold"},"Categories: "),t.categories?t.categories.join(", "):"")),r.a.createElement(h.a,{className:"mt-2"},r.a.createElement(f.a,null,r.a.createElement("span",{className:"font-weight-bold"},"Pages: "),t.pageCount),r.a.createElement(f.a,null,r.a.createElement("span",{className:"font-weight-bold"},"Average Rating: "),t.averageRating?t.averageRating:"N/A")))))}}]),a}(n.Component),R=Object(N.b)((function(e){return{favorites:e.list,banana:e.name}}),(function(e){return{addFavorite:function(t){return new Promise((function(a,n){e({type:"ADD_FAVORITE",payload:t}),a()}))},deleteFavorite:function(t){return new Promise((function(a,n){e({type:"DELETE_FAVORITE",payload:t}),a()}))},deleteFavoriteBook:function(t){e({type:"DELETE_FAVORITE_BOOK",payload:t})}}}))(B),L=(a(134),a(170)),T=new(a(168).a),_={changePage:function(e){return T.next(e)},getPage:function(){return T.asObservable()}},I=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showPagination:!0},e.handlePageClick=function(t,a){e.props.updatePage({collectionName:e.props.collectionToUse,currentPage:a}).then((function(){_.changePage(a)}))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.storeProps[this.props.collectionToUse],t=e.books,a=e.pageCount,n=!0===this.props.showPagination||!1===this.props.showPagination?this.props.showPagination:this.state.showPagination,o=e.currentPage||1;return r.a.createElement(f.a,null,r.a.createElement(h.a,null,r.a.createElement(f.a,null,r.a.createElement(F.a,null,t.map((function(e,t){return r.a.createElement(R,{key:t,singleBook:e})}))))),r.a.createElement(h.a,{className:"mt-2"},r.a.createElement(f.a,{className:"text-center"},n?r.a.createElement(L.a,{className:"pagination-class",count:a,page:o,onChange:this.handlePageClick,showFirstButton:!0,showLastButton:!0,siblingCount:2,boundaryCount:2,size:"large",variant:"outlined",shape:"rounded"}):"")))}}]),a}(n.Component),V=Object(N.b)((function(e){for(var t={},a=0,n=Object.entries(e);a<n.length;a++){var r=Object(m.a)(n[a],2),o=r[0],s=r[1];t[o]=s}return{storeProps:t}}),(function(e){return{updatePage:function(t){return new Promise((function(a,n){e({type:"UPDATE_PAGE",payload:t}),a()}))}}}))(I),U=function e(){Object(i.a)(this,e),this.books=[],this.pageCount=1,this.currentPage=1,this.bookSearch=""},D=a(173),M=a(162),K=a(163),z=a(164),G=a(11),W=(a(135),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={error:!1,fetchingBooks:!1,searchValue:"",errorMessage:"",oldSearchValue:"",defaultCollection:"books_home",resultsPerPage:10,currentPage:1,collectionSearch:""},n.doSearch=function(e){var t=n.props.storeProps[n.state.defaultCollection],a=t||new U,r=e||a.currentPage,o=(r-1)*n.state.resultsPerPage,s=n.state.oldSearchValue;n.setState({error:!1});var i=n.state.searchValue;i?(i!==s&&(o=0,r=1),n.setState({fetchingBooks:!0}),n.booksApi.searchBooks(i,o).then((function(e){n.setState({fetchingBooks:!1});var t=e&&e.data&&e.data.totalItems,a=e&&e.data&&e.data.items;if(a){var o=a.map((function(e){return new w(e)})),s=Math.ceil(t/n.state.resultsPerPage);n.props.updateBooks({collectionName:n.state.defaultCollection,books:o,pageCount:s>50?40:s,currentPage:r,bookSearch:i}).then((function(){n.setState({error:!1,oldSearchValue:i})}))}else n.setState({error:!0,errorMessage:P})}))):n.setState({error:!0,errorMessage:j})},n.booksApi=new y,n.favoriteApi=new x,n}return Object(c.a)(a,[{key:"captureSearchValue",value:function(e){this.setState({searchValue:e.target.value,collectionSearch:e.target.value})}},{key:"keyPressed",value:function(e){"Enter"===e.key&&this.doSearch()}},{key:"componentDidMount",value:function(){var e=this;this.subscription=_.getPage().subscribe((function(t){e.doSearch(t)})),this.favoriteApi.getIds().then((function(t){(t||t.data)&&e.props.setFavorites({favorites:t.data})}));var t=this.props.storeProps[this.state.defaultCollection];if(t&&t.books&&t.books.length>0){var a=t.bookSearch||"";this.setState({collectionSearch:a,oldSearchValue:a,searchValue:a})}}},{key:"componentWillUnmount",value:function(){this.subscription.unsubscribe()}},{key:"render",value:function(){var e=this,t=this.state.error,a=this.state.fetchingBooks,n=this.props.storeProps[this.state.defaultCollection],o=n&&n.books&&n.books.length>0,s=this.state.errorMessage,i=this.state.defaultCollection,c=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(f.a,null,r.a.createElement(D.a,{position:"static"},r.a.createElement(M.a,null,r.a.createElement(K.a,{edge:"start",className:c.menuButton,color:"inherit","aria-label":"open drawer"}),r.a.createElement(z.a,{className:c.title,variant:"h6",noWrap:!0},"Search Books"),r.a.createElement("div",{className:c.search},r.a.createElement(h.a,{className:"px-0"},r.a.createElement(f.a,{sm:8,className:"px-0 mr-3"},r.a.createElement(g.a.Control,{type:"email",placeholder:"Search",onChange:function(t){return e.captureSearchValue(t)},onKeyPress:function(t){return e.keyPressed(t)},value:this.state.collectionSearch})),r.a.createElement(f.a,{sm:3,className:"px-0"},r.a.createElement(d.a,{onClick:function(t){return e.doSearch()},variant:"primary",type:"button"},"Search")))),r.a.createElement("div",{className:c.grow}))))),r.a.createElement(h.a,{className:"mt-2"},o?r.a.createElement(V,{collectionToUse:i}):a?r.a.createElement(f.a,{className:"text-center fetching-books"},"Searching for books..."):t?r.a.createElement(f.a,{className:"text-center error-message"},s):r.a.createElement(f.a,{className:"mt-5 text-center"},r.a.createElement("span",{className:"no-books"},"Type in search to find books"))))}}]),a}(n.Component)),J=Object(N.b)((function(e){for(var t={},a=0,n=Object.entries(e);a<n.length;a++){var r=Object(m.a)(n[a],2),o=r[0],s=r[1];t[o]=s}return{storeProps:t}}),(function(e){return{updateBooks:function(t){return new Promise((function(a,n){e(S(t)),a()}))},setFavorites:function(t){e(C(t))}}}))(Object(G.a)((function(e){return{grow:{flexGrow:1},title:Object(p.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(p.a)({position:"relative",borderRadius:e.shape.borderRadius,marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"})}}))(W)),Y=a(44),q=a(91),H=a(90),X=a(167),Q=a(166),Z=a(171),$=a(172),ee=a(67),te=a(87),ae=a.n(te),ne=(a(139),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:"mb-2 mt-1"},r.a.createElement(f.a,null,r.a.createElement(Q.a,{className:"header-image",src:ae.a,fluid:!0}))),r.a.createElement(h.a,{className:"mb-2"},r.a.createElement(f.a,null,r.a.createElement(Z.a,{bg:"secondary",variant:"dark",className:"justify-content-end"},r.a.createElement($.a,{className:"ml-auto"},r.a.createElement(ee.LinkContainer,{to:"/",exact:!0},r.a.createElement($.a.Link,null,"Search")),r.a.createElement(ee.LinkContainer,{to:"/favorites"},r.a.createElement($.a.Link,null,"Favorites")))))))});a(140);function re(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null,"Sorry, page not found!"))}a(141);var oe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={error:!1,fetchingBooks:!1,errorMessage:"",defaultCollection:"books_favorite",resultsPerPage:10,currentPage:1},n.favoriteApi=new x,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getFavorites()}},{key:"updateFavoriteList",value:function(e){if(!this.props.storeProps.list||0===this.props.storeProps.list.length){var t=e.map((function(e){return e.id}));this.props.setFavorites({favorites:t})}}},{key:"getFavorites",value:function(){var e=this;this.favoriteApi.getFavorites().then((function(t){if(t||t.data){var a=t.data.length,n=t.data.map((function(e){var t=new w;return t.createFromObject(e),t})),r=Math.ceil(a/e.state.resultsPerPage);e.updateFavoriteList(n),e.props.updateBooks({collectionName:e.state.defaultCollection,books:n,pageCount:r>50?40:r,currentPage:e.state.currentPage}).then((function(){e.setState({error:!1})}))}}))}},{key:"render",value:function(){var e=this.state.error,t=this.state.fetchingBooks,a=this.state.errorMessage,n=this.state.defaultCollection,o=this.props.storeProps[this.state.defaultCollection],s=o&&o.books&&o.books.length>0,i=this.props.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(f.a,null,r.a.createElement(D.a,{position:"static"},r.a.createElement(M.a,null,r.a.createElement(K.a,{edge:"start",className:i.menuButton,color:"inherit","aria-label":"open drawer"}),r.a.createElement(z.a,{className:i.title,variant:"h6",noWrap:!0},"Favorites"),r.a.createElement("div",{className:i.grow}))))),r.a.createElement(h.a,null,s?r.a.createElement(V,{showPagination:!1,collectionToUse:n}):t?r.a.createElement(f.a,{className:"text-center fetching-books"},"Loading Favorites...."):e?r.a.createElement(f.a,{className:"text-center"},a):r.a.createElement(f.a,{className:"text-center mt-5"},r.a.createElement("span",{className:"no-favorites"},"No Favorites, Go Add A Favorite!"))))}}]),a}(n.Component),se=Object(N.b)((function(e){for(var t={},a=0,n=Object.entries(e);a<n.length;a++){var r=Object(m.a)(n[a],2),o=r[0],s=r[1];t[o]=s}return{storeProps:t}}),(function(e){return{updateBooks:function(t){return new Promise((function(a,n){e(S(t)),a()}))},setFavorites:function(t){e(C(t))}}}))(Object(G.a)((function(e){return{grow:{flexGrow:1},title:Object(p.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"})}}))(oe));Y.b.add(H.a,q.a);var ie=function(){return r.a.createElement(X.a,null,r.a.createElement(ne,null),r.a.createElement(s.g,null,r.a.createElement(s.d,{path:"/",component:J,exact:!0}),r.a.createElement(s.d,{path:"/search",component:J,exact:!0}),r.a.createElement(s.d,{path:"/favorites",component:se,exact:!0}),r.a.createElement(s.d,{component:re})))},ce=a(41),le=a(52),ue=a(63),pe=a(13),me={books_home:U,books_favorite:U,list:[],name:""},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;if("UPDATE_BOOKS"===t.type){var a=t.payload.collectionName,n=new U;return Object.assign(n,{books:t.payload.books,resultsPerPage:t.payload.resultsPerPage,pageCount:t.payload.pageCount,currentPage:t.payload.currentPage,bookSearch:t.payload.bookSearch}),Object(pe.a)(Object(pe.a)({},e),{},Object(p.a)({},a,n))}if("UPDATE_PAGE"===t.type){var r=t.payload.collectionName,o=e[r];return Object.assign(o,{currentPage:t.payload.currentPage}),Object(pe.a)(Object(pe.a)({},e),{},{collectionState:o})}return"ADD_FAVORITE"===t.type?Object(pe.a)(Object(pe.a)({},e),{},{list:[].concat(Object(ue.a)(e.list),[t.payload.favorite])}):"DELETE_FAVORITE_BOOK"===t.type?Object(pe.a)(Object(pe.a)({},e),{},{books_favorite:Object(pe.a)(Object(pe.a)({},e.books_favorite),{},{books:e.books_favorite.books.filter((function(e){return e.id!==t.payload.id}))})}):"DELETE_FAVORITE"===t.type?Object(pe.a)(Object(pe.a)({},e),{},{list:e.list.filter((function(e){return e!==t.payload.favorite}))}):"SET_FAVORITES"===t.type?Object(pe.a)(Object(pe.a)({},e),{},{list:[].concat(Object(ue.a)(e.list),Object(ue.a)(t.payload.favorites))}):e},fe=Object(le.b)(he);Object(o.render)(r.a.createElement(N.a,{store:fe},r.a.createElement(ce.BrowserRouter,null,r.a.createElement(ie,null))),document.getElementById("root"))},87:function(e,t,a){e.exports=a.p+"static/media/header.1f87e58f.jpg"}},[[101,1,2]]]);
//# sourceMappingURL=main.d6cd8bca.chunk.js.map